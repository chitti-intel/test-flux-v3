{"kind":"ResourceBundleState","apiVersion":"k8splugin.io/v1alpha1","metadata":{"name":"7407816797605429688-kube-prometheus-stack","namespace":"default","uid":"8c0d7e0c-4ec3-4792-89ff-096431b304ba","resourceVersion":"10273985","generation":1,"creationTimestamp":"2022-10-11T22:07:39Z","labels":{"emco/deployment-id":"7407816797605429688-kube-prometheus-stack","kustomize.toolkit.fluxcd.io/name":"kust7407816797605429688","kustomize.toolkit.fluxcd.io/namespace":"default"},"managedFields":[{"manager":"kustomize-controller","operation":"Apply","apiVersion":"k8splugin.io/v1alpha1","time":"2022-10-11T22:07:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:emco/deployment-id":{},"f:kustomize.toolkit.fluxcd.io/name":{},"f:kustomize.toolkit.fluxcd.io/namespace":{}}},"f:spec":{"f:selector":{"f:matchLabels":{"f:emco/deployment-id":{}}}}}},{"manager":"monitor","operation":"Update","apiVersion":"k8splugin.io/v1alpha1","time":"2022-10-11T22:07:39Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:configMapStatuses":{},"f:jobStatuses":{},"f:ready":{},"f:resourceCount":{},"f:statefulSetStatuses":{}}},"subresource":"status"}]},"spec":{"selector":{"matchLabels":{"emco/deployment-id":"7407816797605429688-kube-prometheus-stack"}}},"status":{"ready":false,"resourceCount":0,"configMapStatuses":[{"kind":"ConfigMap","apiVersion":"v1","metadata":{"name":"r1-kube-prometheus-stack-nodes","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-grafana","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"7407816797605429688-kube-prometheus-stack","grafana_dashboard":"1","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"kust7407816797605429688","kustomize.toolkit.fluxcd.io/namespace":"default","release":"r1"}}},{"kind":"ConfigMap","apiVersion":"v1","metadata":{"name":"r1-kube-prometheus-stack-k8s-coredns","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-grafana","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"7407816797605429688-kube-prometheus-stack","grafana_dashboard":"1","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"kust7407816797605429688","kustomize.toolkit.fluxcd.io/namespace":"default","release":"r1"}}}],"jobStatuses":[{"kind":"Job","apiVersion":"batch/v1","metadata":{"name":"r1-kube-prometheus-stack-admission-create","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-admission-create","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"7407816797605429688-kube-prometheus-stack","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"kust7407816797605429688","kustomize.toolkit.fluxcd.io/namespace":"default","release":"r1"},"annotations":{"batch.kubernetes.io/job-tracking":"","helm.sh/hook":"pre-install,pre-upgrade","helm.sh/hook-delete-policy":"before-hook-creation,hook-succeeded"}},"spec":{"parallelism":1,"completions":1,"backoffLimit":6,"selector":{"matchLabels":{"controller-uid":"913bf940-fd01-425e-b615-313ccf7b4fca"}},"template":{"metadata":{"name":"r1-kube-prometheus-stack-admission-create","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-admission-create","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","controller-uid":"913bf940-fd01-425e-b615-313ccf7b4fca","emco/deployment-id":"7407816797605429688-kube-prometheus-stack","heritage":"Helm","job-name":"r1-kube-prometheus-stack-admission-create","release":"r1"}},"spec":{"containers":[{"name":"create","image":"k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0@sha256:f3b6b39a6062328c095337b4cadcefd1612348fdd5190b1dcbcb9b9e90bd8068","args":["create","--host=r1-kube-prometheus-stack-operator,r1-kube-prometheus-stack-operator.default.svc","--namespace=default","--secret-name=r1-kube-prometheus-stack-admission"],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"OnFailure","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-kube-prometheus-stack-admission","serviceAccount":"r1-kube-prometheus-stack-admission","securityContext":{"runAsUser":2000,"runAsGroup":2000,"runAsNonRoot":true},"schedulerName":"default-scheduler"}},"completionMode":"NonIndexed","suspend":false},"status":{"conditions":[{"type":"Complete","status":"True","lastProbeTime":"2022-10-11T22:05:24Z","lastTransitionTime":"2022-10-11T22:05:24Z"}],"startTime":"2022-10-11T22:05:15Z","completionTime":"2022-10-11T22:05:24Z","succeeded":1,"uncountedTerminatedPods":{}}}],"statefulSetStatuses":[{"kind":"StatefulSet","apiVersion":"apps/v1","metadata":{"name":"prometheus-r1-kube-prometheus-stack-prometheus","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-prometheus","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"7407816797605429688-kube-prometheus-stack","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"flux-system","kustomize.toolkit.fluxcd.io/namespace":"flux-system","operator.prometheus.io/name":"r1-kube-prometheus-stack-prometheus","operator.prometheus.io/shard":"0","release":"r1"},"annotations":{"prometheus-operator-input-hash":"8096938688405059538"}},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/instance":"r1-kube-prometheus-stack-prometheus","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"prometheus","operator.prometheus.io/name":"r1-kube-prometheus-stack-prometheus","operator.prometheus.io/shard":"0","prometheus":"r1-kube-prometheus-stack-prometheus"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/instance":"r1-kube-prometheus-stack-prometheus","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"prometheus","app.kubernetes.io/version":"2.31.1","operator.prometheus.io/name":"r1-kube-prometheus-stack-prometheus","operator.prometheus.io/shard":"0","prometheus":"r1-kube-prometheus-stack-prometheus"},"annotations":{"kubectl.kubernetes.io/default-container":"prometheus"}},"spec":{"volumes":[{"name":"config","secret":{"secretName":"prometheus-r1-kube-prometheus-stack-prometheus","defaultMode":420}},{"name":"tls-assets","secret":{"secretName":"prometheus-r1-kube-prometheus-stack-prometheus-tls-assets","defaultMode":420}},{"name":"config-out","emptyDir":{}},{"name":"prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0","configMap":{"name":"prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0","defaultMode":420}},{"name":"web-config","secret":{"secretName":"prometheus-r1-kube-prometheus-stack-prometheus-web-config","defaultMode":420}},{"name":"prometheus-r1-kube-prometheus-stack-prometheus-db","emptyDir":{}}],"initContainers":[{"name":"init-config-reloader","image":"quay.io/prometheus-operator/prometheus-config-reloader:v0.52.1","command":["/bin/prometheus-config-reloader"],"args":["--watch-interval=0","--listen-address=:8080","--config-file=/etc/prometheus/config/prometheus.yaml.gz","--config-envsubst-file=/etc/prometheus/config_out/prometheus.env.yaml","--watched-dir=/etc/prometheus/rules/prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0"],"ports":[{"name":"reloader-web","containerPort":8080,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SHARD","value":"0"}],"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"volumeMounts":[{"name":"config","mountPath":"/etc/prometheus/config"},{"name":"config-out","mountPath":"/etc/prometheus/config_out"},{"name":"prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0","mountPath":"/etc/prometheus/rules/prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"prometheus","image":"quay.io/prometheus/prometheus:v2.31.1","args":["--web.console.templates=/etc/prometheus/consoles","--web.console.libraries=/etc/prometheus/console_libraries","--config.file=/etc/prometheus/config_out/prometheus.env.yaml","--storage.tsdb.path=/prometheus","--storage.tsdb.retention.time=10d","--web.enable-lifecycle","--web.external-url=http://r1-kube-prometheus-stack-prometheus.default:9090","--web.route-prefix=/","--web.config.file=/etc/prometheus/web_config/web-config.yaml"],"ports":[{"name":"http-web","containerPort":9090,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"config-out","readOnly":true,"mountPath":"/etc/prometheus/config_out"},{"name":"tls-assets","readOnly":true,"mountPath":"/etc/prometheus/certs"},{"name":"prometheus-r1-kube-prometheus-stack-prometheus-db","mountPath":"/prometheus"},{"name":"prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0","mountPath":"/etc/prometheus/rules/prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0"},{"name":"web-config","readOnly":true,"mountPath":"/etc/prometheus/web_config/web-config.yaml","subPath":"web-config.yaml"}],"readinessProbe":{"httpGet":{"path":"/-/ready","port":"http-web","scheme":"HTTP"},"timeoutSeconds":3,"periodSeconds":5,"successThreshold":1,"failureThreshold":120},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"config-reloader","image":"quay.io/prometheus-operator/prometheus-config-reloader:v0.52.1","command":["/bin/prometheus-config-reloader"],"args":["--listen-address=:8080","--reload-url=http://127.0.0.1:9090/-/reload","--config-file=/etc/prometheus/config/prometheus.yaml.gz","--config-envsubst-file=/etc/prometheus/config_out/prometheus.env.yaml","--watched-dir=/etc/prometheus/rules/prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0"],"ports":[{"name":"reloader-web","containerPort":8080,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SHARD","value":"0"}],"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"volumeMounts":[{"name":"config","mountPath":"/etc/prometheus/config"},{"name":"config-out","mountPath":"/etc/prometheus/config_out"},{"name":"prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0","mountPath":"/etc/prometheus/rules/prometheus-r1-kube-prometheus-stack-prometheus-rulefiles-0"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":600,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-kube-prometheus-stack-prometheus","serviceAccount":"r1-kube-prometheus-stack-prometheus","securityContext":{"runAsUser":1000,"runAsGroup":2000,"runAsNonRoot":true,"fsGroup":2000},"schedulerName":"default-scheduler"}},"serviceName":"prometheus-operated","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"prometheus-r1-kube-prometheus-stack-prometheus-74b9779fdf","updateRevision":"prometheus-r1-kube-prometheus-stack-prometheus-74b9779fdf","collisionCount":0,"availableReplicas":0}},{"kind":"StatefulSet","apiVersion":"apps/v1","metadata":{"name":"alertmanager-r1-kube-prometheus-stack-alertmanager","namespace":"default","creationTimestamp":null,"labels":{"app":"kube-prometheus-stack-alertmanager","app.kubernetes.io/instance":"r1","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/part-of":"kube-prometheus-stack","app.kubernetes.io/version":"23.2.0","chart":"kube-prometheus-stack-23.2.0","emco/deployment-id":"7407816797605429688-kube-prometheus-stack","heritage":"Helm","kustomize.toolkit.fluxcd.io/name":"kust7407816797605429688","kustomize.toolkit.fluxcd.io/namespace":"default","release":"r1"},"annotations":{"prometheus-operator-input-hash":"16968149524516559745"}},"spec":{"replicas":1,"selector":{"matchLabels":{"alertmanager":"r1-kube-prometheus-stack-alertmanager","app.kubernetes.io/instance":"r1-kube-prometheus-stack-alertmanager","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"alertmanager"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"alertmanager":"r1-kube-prometheus-stack-alertmanager","app.kubernetes.io/instance":"r1-kube-prometheus-stack-alertmanager","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"alertmanager","app.kubernetes.io/version":"0.23.0"},"annotations":{"kubectl.kubernetes.io/default-container":"alertmanager"}},"spec":{"volumes":[{"name":"config-volume","secret":{"secretName":"alertmanager-r1-kube-prometheus-stack-alertmanager-generated","defaultMode":420}},{"name":"tls-assets","secret":{"secretName":"alertmanager-r1-kube-prometheus-stack-alertmanager-tls-assets","defaultMode":420}},{"name":"alertmanager-r1-kube-prometheus-stack-alertmanager-db","emptyDir":{}}],"containers":[{"name":"alertmanager","image":"quay.io/prometheus/alertmanager:v0.23.0","args":["--config.file=/etc/alertmanager/config/alertmanager.yaml","--storage.path=/alertmanager","--data.retention=120h","--cluster.listen-address=","--web.listen-address=:9093","--web.external-url=http://r1-kube-prometheus-stack-alertmanager.default:9093","--web.route-prefix=/","--cluster.peer=alertmanager-r1-kube-prometheus-stack-alertmanager-0.alertmanager-operated:9094","--cluster.reconnect-timeout=5m"],"ports":[{"name":"http-web","containerPort":9093,"protocol":"TCP"},{"name":"mesh-tcp","containerPort":9094,"protocol":"TCP"},{"name":"mesh-udp","containerPort":9094,"protocol":"UDP"}],"env":[{"name":"POD_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}}],"resources":{"requests":{"memory":"200Mi"}},"volumeMounts":[{"name":"config-volume","mountPath":"/etc/alertmanager/config"},{"name":"tls-assets","readOnly":true,"mountPath":"/etc/alertmanager/certs"},{"name":"alertmanager-r1-kube-prometheus-stack-alertmanager-db","mountPath":"/alertmanager"}],"livenessProbe":{"httpGet":{"path":"/-/healthy","port":"http-web","scheme":"HTTP"},"timeoutSeconds":3,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/-/ready","port":"http-web","scheme":"HTTP"},"initialDelaySeconds":3,"timeoutSeconds":3,"periodSeconds":5,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"config-reloader","image":"quay.io/prometheus-operator/prometheus-config-reloader:v0.52.1","command":["/bin/prometheus-config-reloader"],"args":["--listen-address=:8080","--reload-url=http://127.0.0.1:9093/-/reload","--watched-dir=/etc/alertmanager/config"],"ports":[{"name":"reloader-web","containerPort":8080,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SHARD","value":"-1"}],"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"volumeMounts":[{"name":"config-volume","readOnly":true,"mountPath":"/etc/alertmanager/config"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":120,"dnsPolicy":"ClusterFirst","serviceAccountName":"r1-kube-prometheus-stack-alertmanager","serviceAccount":"r1-kube-prometheus-stack-alertmanager","securityContext":{"runAsUser":1000,"runAsGroup":2000,"runAsNonRoot":true,"fsGroup":2000},"schedulerName":"default-scheduler"}},"serviceName":"alertmanager-operated","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"alertmanager-r1-kube-prometheus-stack-alertmanager-55bcd6d6c6","updateRevision":"alertmanager-r1-kube-prometheus-stack-alertmanager-55bcd6d6c6","collisionCount":0,"availableReplicas":0}}]}}